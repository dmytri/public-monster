<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåê</text></svg>">
<title>public.monster</title>
<meta name="description" content="Your personal corner of the web. Upload HTML and go live instantly at public.monster/~yourusername">
<meta property="og:title" content="public.monster">
<meta property="og:description" content="Remember when the web was fun? Upload your HTML and go live instantly.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://public.monster">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="public.monster">
<meta name="twitter:description" content="Your personal corner of the web. Upload HTML and go live instantly.">
<link rel="me" href="https://dmytri.to">
<link rel="author" href="https://dmytri.to">
<!-- Privacy-friendly analytics by Plausible -->
<script async src="https://plausible.io/js/pa-neokOJSyQG1cGL1NXRHGs.js"></script>
<script>
  window.plausible=window.plausible||function(){(plausible.q=plausible.q||[]).push(arguments)},plausible.init=plausible.init||function(i){plausible.o=i||{}};
  plausible.init()
</script>
<script type="module">
import { register } from "https://esm.run/@teamhanko/hanko-elements";

let currentUserId = null;
let hankoToken = null;

const { hanko } = await register("HANKO_API_URL_PLACEHOLDER");

const showAuth = () => {
  document.getElementById('auth').style.display = 'block';
  document.getElementById('upload').style.display = 'none';
};

const showUpload = (userId) => {
  currentUserId = userId;
  document.getElementById('auth').style.display = 'none';
  document.getElementById('upload').style.display = 'block';
  document.getElementById('link').href = '/~' + userId + '/';
  document.getElementById('link').textContent = '/~' + userId + '/';
};

hanko.onSessionCreated(async (event) => {
  window.hankoToken = await hanko.getSessionToken();
  const user = await hanko.getUser(); 
  const userId = user.username;
  showUpload(userId);
});

const token = await hanko.getSessionToken();
if (token) {
  window.hankoToken = token;
  const user = await hanko.getUser(); 
  const userId = user.username;
  console.log(user);
  showUpload(userId);
}
</script>
<style>
body{background:#008080;color:#000;font-family:"Comic Sans MS",cursive;margin:20px;position:relative}
main{background:#c0c0c0;border:4px outset #fff;padding:20px;max-width:800px;margin:0 auto}
h1{color:#ff00ff;text-shadow:2px 2px #000;font-size:2em;margin:0}
h2{color:#000;background:#ff0;padding:5px 10px;display:inline-block}
form{background:#fff;border:2px inset #999;padding:15px;margin:20px 0}
input,button{font-family:inherit;font-size:1em;margin:5px}
button{background:#c0c0c0;border:2px outset #fff;padding:5px 15px;cursor:pointer}
button:active{border-style:inset}
a{color:#00f;text-decoration:underline}
.blink{animation:blink 1s infinite}
@keyframes blink{50%{opacity:0}}
#auth{display:block}
#upload{display:none}
.beta-badge{position:fixed;top:20px;right:20px;background:#ff0;color:#f00;font-weight:bold;font-size:1.5em;padding:8px 16px;border:3px solid #f00;transform:rotate(15deg);box-shadow:3px 3px 0 #000;z-index:1000}
.construction{text-align:center;margin:20px 0}
.construction img{width:88px;height:31px;image-rendering:pixelated}
</style>
</head>
<body>
<div class="beta-badge">BETA</div>
<main role="main">
<h1>üåê Welcome to public.monster! üåê</h1>
<p class="blink">‚ö° Your personal corner of the web! ‚ö°</p>
<div id="auth">
<h2>Login / Sign Up</h2>
<hanko-auth mode="registration"></hanko-auth>
</div>
<div id="upload">
<h2>Upload Your Site</h2>
<form id="uploadForm" aria-label="Upload files">
<label for="files">Files: <input id="files" type="file" multiple></label><br>
<label for="folder">Folder: <input id="folder" type="file" webkitdirectory></label><br>
<button type="submit" id="btn">üöÄ Upload</button>
<p id="status"></p>
</form>
<p>Your site: <a href="#" id="link"></a></p>
</div>
<script>
const form = document.getElementById('uploadForm');
const status = document.getElementById('status');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const filesInput = document.getElementById('files');
  const folderInput = document.getElementById('folder');
  const files = [...(filesInput.files || []), ...(folderInput.files || [])];
  
  if (files.length === 0) {
    status.textContent = '‚ùå No files selected';
    return;
  }
  
  status.textContent = `‚è≥ Uploading ${files.length} file(s)...`;
  
  let count = 0;
  for (const file of files) {
    count++;
    status.textContent = `‚è≥ Uploading ${count}/${files.length}: ${file.name}...`;
    const formData = new FormData();
    formData.append('file', file);
    formData.append('path', file.webkitRelativePath || file.name);
    
    try {
      const headers = {};
      if (window.hankoToken) {
        headers['Authorization'] = 'Bearer ' + window.hankoToken;
      }
      
      const res = await fetch('/upload', {
        method: 'POST',
        headers: headers,
        body: formData
      });
      
      if (!res.ok) {
        status.textContent = `‚ùå Upload failed (${count}/${files.length}): ${file.name}`;
        return;
      }
      
      // Small delay between uploads to avoid rate limiting
      if (count < files.length) {
        await new Promise(resolve => setTimeout(resolve, 300));
      }
    } catch (err) {
      status.textContent = `‚ùå Error: ${err.message}`;
      return;
    }
  }
  
  status.textContent = `‚úÖ Uploaded ${files.length} file(s)!`;
  filesInput.value = '';
  folderInput.value = '';
});

// Make hankoToken available globally
window.hankoToken = null;
</script>
<div class="construction">
<img src="data:image/gif;base64,R0lGODlhWAAfAPcAAAAAAAAAMwAAZgAAmQAAzAAA/wArAAArMwArZgArmQArzAAr/wBVAABVMwBVZgBVmQBVzABV/wCAAACAMwCAZgCAmQCAzACA/wCqAACqMwCqZgCqmQCqzACq/wDVAADVMwDVZgDVmQDVzADV/wD/AAD/MwD/ZgD/mQD/zAD//zMAADMAMzMAZjMAmTMAzDMA/zMrADMrMzMrZjMrmTMrzDMr/zNVADNVMzNVZjNVmTNVzDNV/zOAADOAMzOAZjOAmTOAzDOA/zOqADOqMzOqZjOqmTOqzDOq/zPVADPVMzPVZjPVmTPVzDPV/zP/ADP/MzP/ZjP/mTP/zDP//2YAAGYAM2YAZmYAmWYAzGYA/2YrAGYrM2YrZmYrmWYrzGYr/2ZVAGZVM2ZVZmZVmWZVzGZV/2aAAGaAM2aAZmaAmWaAzGaA/2aqAGaqM2aqZmaqmWaqzGaq/2bVAGbVM2bVZmbVmWbVzGbV/2b/AGb/M2b/Zmb/mWb/zGb//5kAAJkAM5kAZpkAmZkAzJkA/5krAJkrM5krZpkrmZkrzJkr/5lVAJlVM5lVZplVmZlVzJlV/5mAAJmAM5mAZpmAmZmAzJmA/5mqAJmqM5mqZpmqmZmqzJmq/5nVAJnVM5nVZpnVmZnVzJnV/5n/AJn/M5n/Zpn/mZn/zJn//8wAAMwAM8wAZswAmcwAzMwA/8wrAMwrM8wrZswrmcwrzMwr/8xVAMxVM8xVZsxVmcxVzMxV/8yAAMyAM8yAZsyAmcyAzMyA/8yqAMyqM8yqZsyqmcyqzMyq/8zVAMzVM8zVZszVmczVzMzV/8z/AMz/M8z/Zsz/mcz/zMz///8AAP8AM/8AZv8Amf8AzP8A//8rAP8rM/8rZv8rmf8rzP8r//9VAP9VM/9VZv9Vmf9VzP9V//+AAP+AM/+AZv+Amf+AzP+A//+qAP+qM/+qZv+qmf+qzP+q///VAP/VM//VZv/Vmf/VzP/V////AP//M///Zv//mf//zP///wAAAAAAAAAAAAAAACH5BAEAAPwALAAAAABYAB8AAAj/APcJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzps2bOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKnUq1qtWrWLNq3cq1q9evYMOKHUu2rNmzaNOqXcu2rdu3cOPKnUu3rt27ePPq3cu3r9+/gAMLHky4sOHDiBMrXsy4sePHkCNLnky5suXLmDNr3sy5s+fPoEOLHk26tOnTqFOrXs26tevXsGPLnk27tu3buHPr3s27t+/fwIMLH068uPHjyJMrX868ufPn0KNLn069uvXr2LNr3869u/fv4MOLH0++vPnz6NP/q1/Pvr379/Djy59Pv779+/jz69/Pv7///wAGKOCABBZo4IEIJqjgggw26OCDEEYo4YQUVmjhhRhmqOGGHHbo4YcghijiiCSWaOKJKKao4oostujiizDGKOOMNNZo44045qjjjjz26OOPQAYp5JBEFmnkkUgmqeSSTDbp5JNQRinllFRWaeWVWGap5ZZcdunll2CGKeaYZJZp5plopqnmmmy26eabcMYp55x01mnnnXjmqeeefPbp55+ABirooIQWauihiCaq6KKMNuroo5BGKumklFZq6aWYZqrpppx26umnoIYq6qiklmrqqaimquqqrLbq6quwxirrrLTWauutuOaq66689urrr8AGK+ywxBZr7LHIJqvsssw26+yz0EYr7bTUVmvttdhmq+223Hbr7bfghivuuOSWa+656Kar7rrstuvuu/DGK++89NZr77345qvvvvz26++/AAcs8MAEF2zwwQgnrPDCDDfs8MMQRyzxxBRXbPHFGGes8cYcd+zxxyCHLPLIJJds8skop6zyyiy37PLLMMcs88w012zzzTjnrPPOPPfs889ABy300EQXbfTRSCet9NJMN+3001BHLfXUVFdt9dVYZ6311lx37fXXYIct9thkl2322WinrfbabLft9ttwxy333HTXbffdeOet99589+3334AHLvjghBdu+OGIJ6744ow37vjjkEcu+eSUV2755ZhnrvnmnHfu+eeghy766KSXbvrpqKeu+uqst+7667DHLvvstNdu++2456777rz37vvvwAcv/PDEF2/88cgnr/zyzDfv/PPQRy/99NRXb/312Gev/fbcd+/99+CHL/745Jdv/vnop6/++uy37/778Mcv//z012///fjnr///AAygAAdIwAIa8IAITKACF8jABjrwgRCMoAQnSMEKWvCCGMygBjfIwQ568IMgDKEIR0jCEprwhChMoQpXyMIWuvCFMIyhDGdIwxra8IY4zKEOd8jDHvrwiEAMohCHSMQiGvGISEyiEpfIxCY68YlQjKIUp0jFKlrxiljMoha3yMUuevGLYAyjGMdIxjKa8YxoTKMa18jGNrrxjXCMoxznSMc62vGOeMyjHvfIxz768Y+ADKQgB0nIQhrykIhMpCIXychGOvKRkIykJCdJyUpa8pKYzKQmN8nJTnryk6AMpShHScpSmvKUqEylKlfJyla68pWwjKUsZ0nLWtrylrjMpS53ycte+vKXwAymMIdJzGIa85jITKYyl8nMZjrzmcCMpjSnSc1qWvOa2MymNrfJzW5685vgDKc4x0nOcprznOhMpzrXyc52uvOd8IynPOdJz3ra8574zKc+98nPfvrznwANqEAHStCCGvSgCE2oQhfK0IY69KEQjahEJ0rRilr0ohjNqEY3ytGOevSjIA2pSEdK0pKa9KQoTalKV8rSlrr0pTCNqUxnStOa2vSmOM2pTnfK05769KdADapQh0rUohr1qEhNqlKXytSmOvWpUI2qVKdK1apa9apYzapWt8rVrnr1q2ANq1jHStaymvWsaE2rWtfK1ra69a1wjatc50rXutr1rnjNq173yte++vWvgA2sYAdL2MIa9rCITaxiF8vYxjr2sZCNrGQnS9nKWvaynO2sZz8L2tCKdrSkLa1pT4va1Kr2taw=" alt="Under Construction">
</div>
<footer style="text-align:center;margin-top:40px;padding-top:20px;border-top:2px groove #999;font-size:0.9em">
by <a href="https://dmytri.to" target="_blank" rel="noopener">dmytri.to</a> &nbsp;|&nbsp; <a href="/about">what is this, actually?</a>
</footer>
</main>
</body>
</html>
