<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>public.monster - Your Public HTML Space</title>
<script type="module">
import { register } from "https://esm.run/@teamhanko/hanko-elements";
const { hanko } = await register("HANKO_API_URL_PLACEHOLDER");
console.log('Hanko ready');
const auth = (auth=false, uid=null) => {
  const form = document.getElementById('auth');
  const upl = document.getElementById('upload');
  const a   = document.getElementById('link');
  form.style.display = auth ? 'none' : 'block';
  upl.style.display  = auth ? 'block' : 'none';
  a.href = '/~' + auth ? uid : 'you';
  a.textContent = '/~' + auth ? uid : 'you';
}
hanko.onSessionCreated((event) => {
  console.log('Session created:', event.detail);
  auth(true, 'me')
});
const token = await hanko.getSessionToken();
if (token) {
  auth(true,'hello');
}
</script>
<style>
body{background:#008080;color:#000;font-family:"Comic Sans MS",cursive;margin:20px}
main{background:#c0c0c0;border:4px outset #fff;padding:20px;max-width:800px;margin:0 auto}
h1{color:#ff00ff;text-shadow:2px 2px #000;font-size:2.5em;margin:0}
h2{color:#00f;text-decoration:underline}
form{background:#fff;border:2px inset #999;padding:15px;margin:20px 0}
input,button{font-family:inherit;font-size:1em;margin:5px}
button{background:#c0c0c0;border:2px outset #fff;padding:5px 15px;cursor:pointer}
button:active{border-style:inset}
a{color:#00f;text-decoration:underline}
.blink{animation:blink 1s infinite}
@keyframes blink{50%{opacity:0}}
#auth{display:block}
#upload{display:none}
</style>
</head>
<body>
<main role="main">
<h1>ğŸŒ Welcome to public.monster! ğŸŒ</h1>
<p class="blink">âš¡ Your personal corner of the web! âš¡</p>
<div id="auth">
<h2>Login / Sign Up</h2>
<hanko-auth></hanko-auth>
</div>
<div id="upload">
<h2>Upload Your Site</h2>
<form id="uploadForm" aria-label="Upload files">
<label for="files">Files: <input id="files" type="file" multiple></label><br>
<label for="folder">Folder: <input id="folder" type="file" webkitdirectory></label><br>
<button type="submit" id="btn">ğŸš€ Upload</button>
<p id="status"></p>
</form>
<p>Your site: <a href="#" id="link"></a></p>
</div>
<script>
window.addEventListener('hanko-ready', () => {
});
</script>
<footer style="text-align:center;margin-top:40px;padding-top:20px;border-top:2px groove #999;font-size:0.9em">
by <a href="https://dmytri.to" target="_blank" rel="noopener">dmytri.to</a>
</footer>
</main>
</body>
</html>
